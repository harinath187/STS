{% extends "base.html" %}

{% block title %}My Project Count{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">Welcome, {{ user.firstname }}</h2>
    <div class="alert alert-info">
        You are managing <strong>{{ count }}</strong> project{{ 's' if count != 1 else '' }}.
    </div>
    <a href="/projects" class="btn btn-primary">Back to Project List</a>
</div>
<div class="bg-white shadow rounded-lg p-6">
  <h2 class="text-xl font-bold mb-4 text-center">Team Tasks Under Your Projects</h2>
  <div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-800 text-white">
        <tr>
          <th class="px-4 py-2">Employee</th>
          <th class="px-4 py-2">Role</th>
          <th class="px-4 py-2">Email</th>
          <th class="px-4 py-2">Project</th>
          <th class="px-4 py-2">Task</th>
          <th class="px-4 py-2">Status</th>
          <th class="px-4 py-2">Start</th>
          <th class="px-4 py-2">End</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        {% for task in team_tasks %}
        <tr>
          <td class="px-4 py-2">{{ task.employee_name }}</td>
          <td class="px-4 py-2">{{ task.role }}</td>
          <td class="px-4 py-2">{{ task.email }}</td>
          <td class="px-4 py-2">{{ task.project_name }}</td>
          <td class="px-4 py-2">{{ task.task_name }}</td>
          <td class="px-4 py-2">
            {% if task.status == 'COMPLETED' %}
              <span class="inline-block px-2 py-1 text-xs font-semibold bg-green-600 text-white rounded">Completed</span>
            {% else %}
              <span class="inline-block px-2 py-1 text-xs font-semibold bg-yellow-400 text-black rounded">Pending</span>
            {% endif %}
          </td>
          <td class="px-4 py-2">{{ task.Start_Date }}</td>
          <td class="px-4 py-2">{{ task.End_Date }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
