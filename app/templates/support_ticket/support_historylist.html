{% extends "base.html" %}

{% block title %}Support History{% endblock %}

{% block content %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap4.min.css" />
<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap4.min.css" />

<style>
  table#historyTable thead th {
    background-color: black !important;
    color: white !important;
  }
</style>

<div class="flex min-h-screen">

  <aside class="w-64 bg-white shadow-md flex flex-col fixed top-0 left-0 bottom-0">
    {% include "common/it_manager.html" %}
  </aside>

  <main class="flex-1 ml-64 mt-0 p-6 bg-gray-50">
    <h1 class="text-2xl font-semibold mb-6">Welcome {{ user.firstname }}</h1>

    <div class="table-responsive">
      <table id="historyTable" class="table table-striped table-bordered dt-responsive nowrap" style="width:100%">
        <thead>
          <tr>
            <th>Assigned To</th>
            <th>Assigned By</th>
            <th>Department Name</th>
            <th>Duration</th>
            <th>Problem Description</th>
            <th>Priority</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for history in historylist %}
          <tr>
            <td>{{ history.assignto }}</td>
            <td>{{ history.assignby }}</td>
            <td>{{ history.dept_name }}</td>
            <td>{{ history.duration }}</td>
            <td>{{ history.problem_description }}</td>
            <td>{{ history.priority }}</td>
            <td>{{ history.status }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </main>
</div>
{% endblock %}

{% block scripts %}
<script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap4.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.5.0/js/responsive.bootstrap4.min.js"></script>

<script>
  $(document).ready(function () {
    $('#historyTable').DataTable({
      responsive: true,
      paging: true,
      searching: true,
      ordering: true,
      info: true,
      lengthChange: true,
      pageLength: 10
    });
  });
</script>
{% endblock %}
