{% extends "base.html" %}

{% block title %}My Tasks{% endblock %}

{% block content %}
<aside class="w-64 bg-white shadow-md flex flex-col fixed top-0 left-0 bottom-0">
  {% include "common/employee_dashboard.html" %}
</aside>

<main class="ml-64 p-8 min-h-screen bg-gray-50">
  <h1 class="text-3xl font-semibold mb-6">Welcome, {{ user.firstname }}!</h1>

  <div class="bg-white p-6 rounded-xl shadow">
    <h2 class="text-xl font-bold mb-4">My Assigned Tasks</h2>

    {% if tasks %}
    <div class="overflow-x-auto">
      <table class="min-w-full border border-gray-200 text-sm">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2 border">Task ID</th>
            <th class="px-4 py-2 border">Task Name</th>
            <th class="px-4 py-2 border">Project</th>
            <th class="px-4 py-2 border">Description</th>
            <th class="px-4 py-2 border">Assigned By</th>
            <th class="px-4 py-2 border">Start Date</th>
            <th class="px-4 py-2 border">End Date</th>
            <th class="px-4 py-2 border">Estimated Hrs</th>
            <th class="px-4 py-2 border">Worked Hrs</th>
            <th class="px-4 py-2 border">Status</th>
            <th class="px-4 py-2 border">Comments</th>
          </tr>
        </thead>
        <tbody>
          {% for task in tasks %}
          <tr class="hover:bg-gray-50">
            <td class="px-4 py-2 border">{{ task.task_id }}</td>
            <td class="px-4 py-2 border">{{ task.task_name }}</td>
            <td class="px-4 py-2 border">{{ task.project_name }}</td>
            <td class="px-4 py-2 border">{{ task.task_description }}</td>
            <td class="px-4 py-2 border">{{ task.assigned_by_firstname }} {{ task.assigned_by_lastname }}</td>
            <td class="px-4 py-2 border">{{ task.Start_Date }}</td>
            <td class="px-4 py-2 border">{{ task.End_Date }}</td>
            <td class="px-4 py-2 border">{{ task.estimated_hrs }}</td>
            <td class="px-4 py-2 border">{{ task.worked_hrs }}</td>
            <td class="px-4 py-2 border">{{ task.status }}</td>
            <td class="px-4 py-2 border">{{ task.Comments }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
      <p class="text-gray-500">No tasks assigned yet.</p>
    {% endif %}
  </div>
</main>
{% endblock %}
