



{% extends "base.html" %}
 
{% block title %}Employee Dashboard{% endblock %}
 
{% block content %}
<div class="flex min-h-screen bg-gray-50">
 
  <!-- Sidebar -->
  <aside class="w-64 bg-white shadow-md flex flex-col fixed top-0 left-0 bottom-0">
    {% include "common/employee_dashboard.html" %}
  </aside>
 
  <!-- Main Content -->
  <main class="flex-1 ml-64 pt-8 pr-8 pb-8 pl-4">
  <h1 class="text-3xl font-semibold mb-6">Welcome, {{ user.firstname }}!</h1>

<div class="bg-white p-6 rounded-xl shadow">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-bold">My Assigned Tasks</h2>
    <a href="{{ url_for('create_ticket') }}" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
      Create Support Ticket
    </a>
  </div>

  <div class="overflow-x-auto">
    {% if tasks %}
    <table id="tasksTable" class="min-w-full border border-gray-200 text-sm">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-4 py-2 border">Task ID</th>
          <th class="px-4 py-2 border">Task Name</th>
          <th class="px-4 py-2 border">Project</th>
          <th class="px-4 py-2 border">Description</th>
          <th class="px-4 py-2 border">Assigned By</th>
          <th class="px-4 py-2 border">Start Date</th>
          <th class="px-4 py-2 border">End Date</th>
          <th class="px-4 py-2 border">Estimated Hrs</th>
          <th class="px-4 py-2 border">Worked Hrs</th>
          <th class="px-4 py-2 border">Status</th>
          <th class="px-4 py-2 border">Comments</th>
        </tr>
      </thead>
      <tbody>
        {% for task in tasks %}
        <tr class="hover:bg-gray-50">
          <td class="px-4 py-2 border">{{ task.task_id }}</td>
          <td class="px-4 py-2 border">{{ task.task_name }}</td>
          <td class="px-4 py-2 border">{{ task.project_name }}</td>
          <td class="px-4 py-2 border">{{ task.task_description }}</td>
          <td class="px-4 py-2 border">{{ task.assigned_by_firstname }} {{ task.assigned_by_lastname }}</td>
          <td class="px-4 py-2 border">{{ task.Start_Date }}</td>
          <td class="px-4 py-2 border">{{ task.End_Date }}</td>
          <td class="px-4 py-2 border">{{ task.estimated_hrs }}</td>
          <td class="px-4 py-2 border">{{ task.worked_hrs }}</td>
          <td class="px-4 py-2 border">{{ task.status }}</td>
          <td class="px-4 py-2 border">{{ task.Comments }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p class="text-gray-500">No tasks assigned yet.</p>
    {% endif %}
  </div>
</div>

<!-- DataTables + jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

<script>
  $(document).ready(function () {
    $('#tasksTable').DataTable({
      paging: true,
      pageLength: 10,
      lengthMenu: [5, 10, 25, 50, 100],
      ordering: true,
      searching: true
    });
  });
</script>

  </main>
</div>
{% endblock %}
 
 